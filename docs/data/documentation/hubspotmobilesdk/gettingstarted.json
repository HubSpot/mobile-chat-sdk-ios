{"sections":[],"abstract":[{"type":"text","text":"The basic steps to get the SDK installed and opening chat views."}],"variants":[{"paths":["\/documentation\/hubspotmobilesdk\/gettingstarted"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","primaryContentSections":[{"kind":"content","content":[{"text":"Overview","type":"heading","anchor":"Overview","level":2},{"inlineContent":[{"type":"text","text":"The SDK is a swift package containing hubspot chat view , notification functionality, and additional optional UI components."}],"type":"paragraph"},{"level":3,"text":"Alpha \/ Beta Only - Ensure access to repository","type":"heading","anchor":"Alpha--Beta-Only-Ensure-access-to-repository"},{"type":"paragraph","inlineContent":[{"text":"Confirm the SDK repository is accessible at ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/HubSpot\/mobile-chat-sdk-ios","type":"reference"}]},{"type":"paragraph","inlineContent":[{"text":"During alpha and beta testing, while the repository is private you may need to configure xcode with your Github Account. Add in account from the Xcode Preferences panel, in the account section. If building using a cli tool like xcodebuild, you may need to specify either ","type":"text"},{"type":"codeVoice","code":"-scmProvider system"},{"type":"text","text":" or "},{"type":"codeVoice","code":"-scmProvider xcode"},{"type":"text","text":" to choose if your system git credentials or xcode credentials are used."}]},{"anchor":"Installing--Configuring-the-SDK","level":3,"text":"Installing & Configuring the SDK","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"Use swift packages to add the SDK to your workspace, using the github repository URL. Add the ","type":"text"},{"type":"codeVoice","code":"HubspotMobileSDK"},{"text":" library as a dependency of your app project and target.","type":"text"}]},{"type":"paragraph","inlineContent":[{"identifier":"confirm-spm","type":"image"}]},{"type":"paragraph","inlineContent":[{"text":"Be sure to download and include the ","type":"text"},{"type":"codeVoice","code":"Hubspot-Info.plist"},{"type":"text","text":" file from your hubspot account at "},{"identifier":"https:\/\/www.hubspot.com","type":"reference","isActive":true},{"text":". Important - make sure to include the file as part of the target within Xcode , in the right inspection panel:","type":"text"},{"type":"text","text":" "},{"type":"image","identifier":"hsIncludeFile"},{"text":" ","type":"text"},{"type":"image","identifier":"hsIncludedTarget"}]},{"type":"paragraph","inlineContent":[{"text":"The SDK needs to be configured once per app launch, before use. The most convenient place to do this is during the app initialiser or the app delegate callback, like so:","type":"text"}]},{"type":"codeListing","code":["import HubspotMobileSDK","","@main","struct MyApp: App {","    ","    init() {","        try! HubspotManager.configure()","    }",""],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"or in a an app delegate:"}]},{"type":"codeListing","syntax":"swift","code":["func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {","    ","    \/\/ Override point for customization after application launch.","    ","    \/\/ This will configure the SDK using the `Hubspot-Info.plist` file that is bundled in app","    try! HubspotManager.configure()","    ","    return true","}"]},{"level":4,"text":"Initialisation Errors","type":"heading","anchor":"Initialisation-Errors"},{"type":"paragraph","inlineContent":[{"text":"Failure to include the config file, or forgetting to include the file as being part of your apps target will cause initialisation to throw an error:","type":"text"}]},{"type":"paragraph","inlineContent":[{"identifier":"hsInitError","type":"image"},{"type":"text","text":""},{"text":" ","type":"text"},{"identifier":"hsMissingTarget","type":"image"}]},{"text":"Declare additional permissions in your Xcode Project","level":3,"type":"heading","anchor":"Declare-additional-permissions-in-your-Xcode-Project"},{"level":4,"text":"NSCameraUsageDescription","type":"heading","anchor":"NSCameraUsageDescription"},{"type":"paragraph","inlineContent":[{"text":"The chat view contains an option to attach an existing image, or to take a new image. For this functionality work, ","type":"text"},{"type":"strong","inlineContent":[{"text":"your app should have an entry in the Info plist","type":"text"}]},{"text":" for ","type":"text"},{"type":"codeVoice","code":"NSCameraUsageDescription"},{"type":"text","text":"."}]},{"text":"Opening Hubspot Chat View","anchor":"Opening-Hubspot-Chat-View","type":"heading","level":3},{"inlineContent":[{"text":"The chat view can be presented modally as a sheet , or fullscreen, or pushed into a navigation stack. The easiest way to get started is to present the chat view as a sheet in response to a button press in your UI.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The Chat view can be initialised using "},{"identifier":"doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotChatView\/init(manager:pushData:chatFlow:)","type":"reference","isActive":true},{"text":" , either with default values or by customising the chat settings","type":"text"}]},{"level":4,"type":"heading","text":"Showing the chat as a sheet in SwiftUI","anchor":"Showing-the-chat-as-a-sheet-in-SwiftUI"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The chat view is a SwiftUI View, meaning it can be the contents of a sheet, or embedded in your existing UI like any other view. The easiest way is to present it as a sheet using the "},{"code":".sheet","type":"codeVoice"},{"text":" modifier , in response to user action like pressing a button.","type":"text"}]},{"code":["Button(action: {","    showChat.toggle()","}, label: {","    Text(\"Chat Now\")","","}).sheet(isPresented: $showChat, content: {","    HubspotChatView()","})"],"syntax":"swift","type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here, "},{"code":"$showChat","type":"codeVoice"},{"type":"text","text":" is a state property in the view:"}]},{"syntax":"swift","type":"codeListing","code":["@State var showChat = false"]},{"type":"heading","level":4,"anchor":"Showing-the-chat-as-a-presented-view-controller-in-UIKit","text":"Showing the chat as a presented view controller in UIKit"},{"inlineContent":[{"type":"text","text":"While the Hubspot Chat View is a SwiftUI view, it functions fine when contained in a "},{"type":"codeVoice","code":"UIHostingController"},{"type":"text","text":". For example, to present the chat view from a UIViewController button action:"}],"type":"paragraph"},{"code":["@IBAction","func onButtonPress(_ source: Any) {","","    \/\/Init chat view with no arguments , or use alternative initialiser for configuring chat specifics","    let chatView = HubspotChatView()","    \/\/Create a hosting controller to hold the chat view","    let hostingVC = UIHostingController(rootView: chatView)","    ","    \/\/ Present the view controller like any other (or push into a navigation stack)","    self.present(hostingVC, animated: true)","}","}",""],"syntax":"swift","type":"codeListing"},{"type":"heading","text":"Identifying Users with the Hubspot Visitor Identification Token","anchor":"Identifying-Users-with-the-Hubspot-Visitor-Identification-Token","level":3},{"inlineContent":[{"type":"text","text":"To optionally identify users, you must first obtain a visitor token using  the visitor identification api, detailed at "},{"isActive":true,"type":"reference","identifier":"https:\/\/developers.hubspot.com\/docs\/api\/conversation\/visitor-identification"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"This API is best implemented in your own server project, and the identity token passed to your app by whatever method works for your specific setup - perhaps in response to your own user login or session management, or as a result of a dedicated api."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"Once a token is generated it can be set using the ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/setUserIdentity(identityToken:email:)"},{"type":"text","text":" method. This should be called before opening a chat view."}]},{"anchor":"Adding-Custom-Chat-Data-Properties","level":3,"text":"Adding Custom Chat Data Properties","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"The SDK supports including key value pairs of data when opening a chat session. You can add your own values to these, as well as declare some common permission dates if you wish, if that is something that would be useful for agents during a chat session.","type":"text"}]},{"inlineContent":[{"type":"text","text":"See "},{"isActive":true,"type":"reference","identifier":"doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/setChatProperties(data:)"},{"text":" for the method to use. This is best called before starting a chat, and applies to all new chats.","type":"text"},{"type":"text","text":" "},{"text":"You could set an account status, or some other identifiers when setting up your user, and these will appear in all chats opened for the remainder of the app launch.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"An example of setting a mix of pre-defined properties, and custom properties"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":[" var properties: [String: String] = [","     ChatPropertyKey.cameraPermissions.rawValue: self.checkCameraPermissions(),","     \"myapp-install-id\": appUniqueId,","     \"subscription-tier\": \"premium\""," ]"," HubspotManager.shared.setChatProperties(data: properties)"]},{"type":"heading","level":3,"anchor":"Clearing-Data-On-Logout","text":"Clearing Data On Logout"},{"inlineContent":[{"type":"text","text":"The SDK stores in memory identification tokens, email address, and any properties set. The push token for the app is also associated with the current user , if applicable."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"There are situations where you know you might want to clear this data, such as during a logout or changing user in a multi user app.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"To clear this data, call ","type":"text"},{"identifier":"doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/clearUserData()","type":"reference","isActive":true},{"type":"text","text":" at an appropiate time in in your app. Note this only impacts the data used for future chat sessions - it has no impact on data or chat sessions already stored in hubspot."}]},{"level":2,"text":"Push Messaging","anchor":"Push-Messaging","type":"heading"},{"inlineContent":[{"type":"text","text":"See "},{"type":"reference","identifier":"doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK\/PushNotifications","isActive":true},{"type":"text","text":" for instructions for configuring for push messages"}],"type":"paragraph"}]}],"metadata":{"roleHeading":"Article","modules":[{"name":"HubspotMobileSDK"}],"role":"article","title":"Getting Started"},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK\/GettingStarted"},"schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"paths":[["doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK"]]},"references":{"doc://HubspotMobileSDK/documentation/HubspotMobileSDK/HubspotManager/setUserIdentity(identityToken:email:)":{"identifier":"doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/setUserIdentity(identityToken:email:)","kind":"symbol","role":"symbol","type":"topic","title":"setUserIdentity(identityToken:email:)","abstract":[{"type":"text","text":"Set the user id obtained from the "},{"type":"reference","identifier":"https:\/\/developers.hubspot.com\/docs\/api\/conversation\/visitor-identification","isActive":true},{"type":"text","text":" , along with the users email address. These will be included when starting a chat session to identify the user. Its important to set these before starting a chat session, as they are needed during chat initialisation."}],"url":"\/documentation\/hubspotmobilesdk\/hubspotmanager\/setuseridentity(identitytoken:email:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"text":"setUserIdentity","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"identityToken"},{"text":": ","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"text":"email","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"text":")","kind":"text"}]},"doc://HubspotMobileSDK/documentation/HubspotMobileSDK/PushNotifications":{"type":"topic","title":"Push Notifications","kind":"article","identifier":"doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK\/PushNotifications","role":"article","url":"\/documentation\/hubspotmobilesdk\/pushnotifications","abstract":[{"text":"This article covers the 2 methods of integrating the SDK and Chat with push notifications.","type":"text"}]},"https://developers.hubspot.com/docs/api/conversation/visitor-identification":{"title":"Visitor Identification API","titleInlineContent":[{"text":"Visitor Identification API","type":"text"}],"identifier":"https:\/\/developers.hubspot.com\/docs\/api\/conversation\/visitor-identification","url":"https:\/\/developers.hubspot.com\/docs\/api\/conversation\/visitor-identification","type":"link"},"https://github.com/HubSpot/mobile-chat-sdk-ios":{"title":"https:\/\/github.com\/HubSpot\/mobile-chat-sdk-ios","type":"link","identifier":"https:\/\/github.com\/HubSpot\/mobile-chat-sdk-ios","titleInlineContent":[{"text":"https:\/\/github.com\/HubSpot\/mobile-chat-sdk-ios","type":"text"}],"url":"https:\/\/github.com\/HubSpot\/mobile-chat-sdk-ios"},"hsIncludeFile":{"type":"image","alt":"Demo screenshot","variants":[{"url":"\/images\/hsIncludeFile.png","traits":["1x","light"]}],"identifier":"hsIncludeFile"},"confirm-spm":{"alt":"Adding Package","type":"image","variants":[{"url":"\/images\/confirm-spm.png","traits":["1x","light"]}],"identifier":"confirm-spm"},"hsMissingTarget":{"type":"image","alt":"Demo screenshot","variants":[{"traits":["1x","light"],"url":"\/images\/hsMissingTarget.png"}],"identifier":"hsMissingTarget"},"doc://HubspotMobileSDK/documentation/HubspotMobileSDK/HubspotManager/setChatProperties(data:)":{"title":"setChatProperties(data:)","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"setChatProperties","kind":"identifier"},{"text":"(","kind":"text"},{"text":"data","kind":"externalParam"},{"text":": [","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"kind":"text","text":" : "},{"preciseIdentifier":"s:SS","kind":"typeIdentifier","text":"String"},{"text":"])","kind":"text"}],"role":"symbol","identifier":"doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/setChatProperties(data:)","kind":"symbol","abstract":[{"text":"Set a string key and value collection to be associate with any chat opened.","type":"text"}],"url":"\/documentation\/hubspotmobilesdk\/hubspotmanager\/setchatproperties(data:)","type":"topic"},"https://www.hubspot.com":{"titleInlineContent":[{"type":"text","text":"hubspot.com"}],"type":"link","title":"hubspot.com","url":"https:\/\/www.hubspot.com","identifier":"https:\/\/www.hubspot.com"},"doc://HubspotMobileSDK/documentation/HubspotMobileSDK":{"url":"\/documentation\/hubspotmobilesdk","role":"collection","type":"topic","kind":"symbol","title":"HubspotMobileSDK","abstract":[],"identifier":"doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK"},"hsIncludedTarget":{"type":"image","alt":"Demo screenshot","variants":[{"traits":["1x","light"],"url":"\/images\/hsIncludedTarget.png"}],"identifier":"hsIncludedTarget"},"doc://HubspotMobileSDK/documentation/HubspotMobileSDK/HubspotChatView/init(manager:pushData:chatFlow:)":{"title":"init(manager:pushData:chatFlow:)","fragments":[{"text":"init","kind":"identifier"},{"kind":"text","text":"("},{"text":"manager","kind":"externalParam"},{"kind":"text","text":": "},{"text":"HubspotManager","kind":"typeIdentifier","preciseIdentifier":"c:@M@HubspotMobileSDK@objc(cs)HubspotManager"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"pushData"},{"kind":"text","text":": "},{"text":"PushNotificationChatData","kind":"typeIdentifier","preciseIdentifier":"s:16HubspotMobileSDK24PushNotificationChatDataV"},{"text":"?, ","kind":"text"},{"text":"chatFlow","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":"?)","kind":"text"}],"role":"symbol","identifier":"doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotChatView\/init(manager:pushData:chatFlow:)","kind":"symbol","abstract":[{"type":"text","text":"Create the chat view, optionally specifying the HubspotManager and Chat Flow to use."}],"url":"\/documentation\/hubspotmobilesdk\/hubspotchatview\/init(manager:pushdata:chatflow:)","type":"topic"},"hsInitError":{"alt":"Demo screenshot","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/hsInitError.png"}],"identifier":"hsInitError"},"doc://HubspotMobileSDK/documentation/HubspotMobileSDK/HubspotManager/clearUserData()":{"title":"clearUserData()","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"clearUserData","kind":"identifier"},{"text":"()","kind":"text"}],"role":"symbol","identifier":"doc:\/\/HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/clearUserData()","kind":"symbol","abstract":[{"text":"Delete all user specific data like identity tokens , email address,  custom chat properties etc from any in memory or local stores.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"Note: does not remove any property or user data from Hubspot remotely, except for attempting to remove the push token from the current user."}],"url":"\/documentation\/hubspotmobilesdk\/hubspotmanager\/clearuserdata()","type":"topic"}}}