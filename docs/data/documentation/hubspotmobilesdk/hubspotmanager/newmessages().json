{"sections":[],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/newMessages()"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/hubspotmobilesdk\/hubspotmanager\/newmessages()"]}],"metadata":{"role":"symbol","externalID":"s:16HubspotMobileSDK0A7ManagerC11newMessagesScSyAA24PushNotificationChatDataVGyF","title":"newMessages()","extendedModule":"HubspotMobileSDK","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"newMessages"},{"kind":"text","text":"() -> "},{"text":"AsyncStream","kind":"typeIdentifier","preciseIdentifier":"s:ScS"},{"text":"<","kind":"text"},{"text":"PushNotificationChatData","kind":"typeIdentifier","preciseIdentifier":"s:16HubspotMobileSDK24PushNotificationChatDataV"},{"kind":"text","text":">"}],"symbolKind":"method","modules":[{"name":"HubspotMobileSDK"}],"roleHeading":"Instance Method"},"schemaVersion":{"patch":0,"major":0,"minor":3},"hierarchy":{"paths":[["doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK","doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager"]]},"primaryContentSections":[{"declarations":[{"languages":["swift"],"tokens":[{"kind":"attribute","text":"@"},{"kind":"attribute","preciseIdentifier":"s:ScM","text":"MainActor"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"kind":"identifier","text":"newMessages"},{"text":"() -> ","kind":"text"},{"preciseIdentifier":"s:ScS","text":"AsyncStream","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"kind":"typeIdentifier","identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/PushNotificationChatData","preciseIdentifier":"s:16HubspotMobileSDK24PushNotificationChatDataV","text":"PushNotificationChatData"},{"text":">","kind":"text"}],"platforms":["iOS"]}],"kind":"declarations"},{"kind":"content","content":[{"text":"Discussion","anchor":"discussion","type":"heading","level":2},{"inlineContent":[{"text":"This could be used in a stand alone task like so:","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["Task {","   for await notification in HubspotManager.shared.newMessages() {","      self.triggerChatFlow()","   }","","}"]},{"inlineContent":[{"type":"text","text":"or attached to a view:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["myView","  .frame(...)","  .background(...)","  .task {","    for await _ in HubspotManager.shared.newMessages() {","       presentChatView = true","    }","}"]},{"content":[{"inlineContent":[{"type":"text","text":"This async stream normally will never terminate."}],"type":"paragraph"}],"style":"warning","type":"aside","name":"Warning"}]}],"kind":"symbol","abstract":[{"text":"Alternative to ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/newMessage"},{"type":"text","text":" publisher or "},{"isActive":true,"type":"reference","identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/newMessageCallback"},{"type":"text","text":" property , potentially useful in a SwiftUI view"}],"references":{"doc://hubspot-mobile-sdk-ios.HubspotMobileSDK/documentation/HubspotMobileSDK/PushNotificationChatData":{"role":"symbol","type":"topic","identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/PushNotificationChatData","kind":"symbol","title":"PushNotificationChatData","abstract":[{"text":"Holds all the data that is hubspot specific, extracted from a push notification collection. A convenient way to bundle all the known parameters together for passing along from notification delegate to the chat view","type":"text"}],"fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"PushNotificationChatData"}],"url":"\/documentation\/hubspotmobilesdk\/pushnotificationchatdata","navigatorTitle":[{"kind":"identifier","text":"PushNotificationChatData"}]},"doc://hubspot-mobile-sdk-ios.HubspotMobileSDK/documentation/HubspotMobileSDK":{"title":"HubspotMobileSDK","role":"collection","type":"topic","identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK","abstract":[],"kind":"symbol","url":"\/documentation\/hubspotmobilesdk"},"doc://hubspot-mobile-sdk-ios.HubspotMobileSDK/documentation/HubspotMobileSDK/HubspotManager/newMessage":{"type":"topic","url":"\/documentation\/hubspotmobilesdk\/hubspotmanager\/newmessage","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"text":"newMessage","kind":"identifier"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"PassthroughSubject","preciseIdentifier":"s:7Combine18PassthroughSubjectC"},{"text":"<","kind":"text"},{"text":"PushNotificationChatData","preciseIdentifier":"s:16HubspotMobileSDK24PushNotificationChatDataV","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:s5NeverO","text":"Never"},{"kind":"text","text":">"}],"title":"newMessage","abstract":[{"type":"text","text":"Publisher triggered when user opens a hubspot message. Only triggered when manager is acting as the UNNotificationDelegate, or notifications are forwarded to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/userNotificationCenter(_:didReceive:withCompletionHandler:)"},{"type":"text","text":" method on this manager instance."}],"identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/newMessage","role":"symbol","kind":"symbol"},"doc://hubspot-mobile-sdk-ios.HubspotMobileSDK/documentation/HubspotMobileSDK/HubspotManager":{"role":"symbol","type":"topic","identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager","kind":"symbol","title":"HubspotManager","abstract":[{"text":"The main interface for the Hubspot mobile SDK.","type":"text"}],"fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"HubspotManager"}],"url":"\/documentation\/hubspotmobilesdk\/hubspotmanager","navigatorTitle":[{"kind":"identifier","text":"HubspotManager"}]},"doc://hubspot-mobile-sdk-ios.HubspotMobileSDK/documentation/HubspotMobileSDK/HubspotManager/newMessages()":{"role":"symbol","identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/newMessages()","kind":"symbol","type":"topic","title":"newMessages()","abstract":[{"type":"text","text":"Alternative to "},{"isActive":true,"identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/newMessage","type":"reference"},{"type":"text","text":" publisher or "},{"type":"reference","identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/newMessageCallback","isActive":true},{"type":"text","text":" property , potentially useful in a SwiftUI view"}],"url":"\/documentation\/hubspotmobilesdk\/hubspotmanager\/newmessages()","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"newMessages"},{"kind":"text","text":"() -> "},{"text":"AsyncStream","kind":"typeIdentifier","preciseIdentifier":"s:ScS"},{"text":"<","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:16HubspotMobileSDK24PushNotificationChatDataV","text":"PushNotificationChatData"},{"kind":"text","text":">"}]},"doc://hubspot-mobile-sdk-ios.HubspotMobileSDK/documentation/HubspotMobileSDK/HubspotManager/newMessageCallback":{"abstract":[{"text":"Callback triggered when user opens a hubspot message. Only triggered when manager is acting as the UNNotificationDelegate, or notifications are forwarded to the ","type":"text"},{"isActive":true,"identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/userNotificationCenter(_:didReceive:withCompletionHandler:)","type":"reference"},{"text":" method on this manager instance.","type":"text"}],"identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/newMessageCallback","type":"topic","url":"\/documentation\/hubspotmobilesdk\/hubspotmanager\/newmessagecallback","kind":"symbol","role":"symbol","title":"newMessageCallback","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"newMessageCallback"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"PushNotificationChatData","preciseIdentifier":"s:16HubspotMobileSDK24PushNotificationChatDataV"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:s4Voida","text":"Void","kind":"typeIdentifier"}]},"doc://hubspot-mobile-sdk-ios.HubspotMobileSDK/documentation/HubspotMobileSDK/HubspotManager/userNotificationCenter(_:didReceive:withCompletionHandler:)":{"identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/userNotificationCenter(_:didReceive:withCompletionHandler:)","title":"userNotificationCenter(_:didReceive:withCompletionHandler:)","abstract":[{"type":"text","text":"A "},{"identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager","type":"reference","isActive":true},{"text":" instanance, like ","type":"text"},{"isActive":true,"identifier":"doc:\/\/hubspot-mobile-sdk-ios.HubspotMobileSDK\/documentation\/HubspotMobileSDK\/HubspotManager\/shared","type":"reference"},{"type":"text","text":" can be used as a notification centre delegate, in situations where all notifications are from hubspot. If you have your own notification delegate, instead call this method from within your own delegate for notifications that are hubspot related."}],"kind":"symbol","url":"\/documentation\/hubspotmobilesdk\/hubspotmanager\/usernotificationcenter(_:didreceive:withcompletionhandler:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"userNotificationCenter"},{"text":"(","kind":"text"},{"preciseIdentifier":"c:objc(cs)UNUserNotificationCenter","text":"UNUserNotificationCenter","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"didReceive","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)UNNotificationResponse","text":"UNNotificationResponse"},{"text":", ","kind":"text"},{"text":"withCompletionHandler","kind":"externalParam"},{"text":": () -> ","kind":"text"},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"text":")","kind":"text"}],"role":"symbol","type":"topic"}}}